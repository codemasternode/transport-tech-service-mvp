{"version":3,"sources":["../../src/queries/searchSingle.js"],"names":["height","db","vehicles","aggregate","$match","$gt","$gte","$addFields","palletes","oneRow","$floor","$divide","$multiply","secondRow","$cond","$subtract","then","costPerKm","$sum","$divde"],"mappings":";;AAAA,IAAMA,MAAM,GAAG,IAAf;AACAC,EAAE,CAACC,QAAH,CAAYC,SAAZ,CAAsB,CACpB;AACEC,EAAAA,MAAM,EAAE;AACN,yBAAqB;AACnBC,MAAAA,GAAG,EAAEL,MADc,CACP;;AADO,KADf;AAIN,sBAAkB;AAChBM,MAAAA,IAAI,EAAE;AADU;AAJZ;AADV,CADoB,EAWpB;AACEC,EAAAA,UAAU,EAAE;AACVC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,MAAM,EAAE;AACNC,QAAAA,MAAM,EAAE;AACNC,UAAAA,OAAO,EAAE,CACP;AACEC,YAAAA,SAAS,EAAE,CAAC,oBAAD,EAAuB,mBAAvB;AADb,WADO,EAIP;AACA;AACEA,YAAAA,SAAS,EAAE,CAAC,GAAD,EAAM,GAAN;AADb,WALO;AADH;AADF,OADA;AAcRC,MAAAA,SAAS,EAAE;AACTC,QAAAA,KAAK,EAAE;AACL,gBAAI;AACFT,YAAAA,GAAG,EAAE,CACH;AACEU,cAAAA,SAAS,EAAE,CACT;AACA,kCAFS,EAGTf,MAHS;AADb,aADG,EAQHA,MARG;AADH,WADC;AAaLgB,UAAAA,IAAI,EAAE;AACJN,YAAAA,MAAM,EAAE;AACNC,cAAAA,OAAO,EAAE,CACP;AACEC,gBAAAA,SAAS,EAAE,CAAC,oBAAD,EAAuB,mBAAvB;AADb,eADO,EAIP;AACA;AACEA,gBAAAA,SAAS,EAAE,CAAC,GAAD,EAAM,GAAN;AADb,eALO;AADH;AADJ,WAbD;AA0BL,kBAAM;AA1BD;AADE;AAdH,KADA;AA8CVK,IAAAA,SAAS,EAAE;AACTC,MAAAA,IAAI,EAAE,CACJ;AACEN,QAAAA,SAAS,EAAE,CACT;AACED,UAAAA,OAAO,EAAE,CAAC,CAAD,EAAI,gBAAJ;AADX,SADS,EAIT,kBAJS;AADb,OADI,EASJ;AACEA,QAAAA,OAAO,EAAE,CACP;AACEQ,UAAAA,MAAM,EAAE,CACN;AACEP,YAAAA,SAAS,EAAE,CAAC,eAAD,EAAkB,qBAAlB;AADb,WADM,EAIN,EAJM;AADV,SADO,EASP,0BATO;AADX,OATI;AADG;AA9CD;AADd,CAXoB,CAAtB","sourcesContent":["const height = 1.45;\ndb.vehicles.aggregate([\n  {\n    $match: {\n      \"dimensions.height\": {\n        $gt: height //1.5metra łądunku + 144 mm grubości palety\n      },\n      \"range.maxRange\": {\n        $gte: 650\n      }\n    }\n  },\n  {\n    $addFields: {\n      palletes: {\n        oneRow: {\n          $floor: {\n            $divide: [\n              {\n                $multiply: [\"$dimensions.length\", \"$dimensions.width\"]\n              },\n              //rozmiary palety EUR-EPAL\n              {\n                $multiply: [1.2, 0.8]\n              }\n            ]\n          }\n        },\n        secondRow: {\n          $cond: {\n            if: {\n              $gt: [\n                {\n                  $subtract: [\n                    //odjęcie wysokości pojazdu od tego co zajmuje pierwszy rząd = wysokość która pozostałą\n                    \"$dimensions.height\",\n                    height\n                  ]\n                },\n                height\n              ]\n            },\n            then: {\n              $floor: {\n                $divide: [\n                  {\n                    $multiply: [\"$dimensions.length\", \"$dimensions.width\"]\n                  },\n                  //rozmiary palety EUR-EPAL\n                  {\n                    $multiply: [1.2, 0.8]\n                  }\n                ]\n              }\n            },\n            else: 0\n          }\n        }\n      },\n      costPerKm: {\n        $sum: [\n          {\n            $multiply: [\n              {\n                $divide: [1, \"$sumKmPerMonth\"]\n              },\n              \"$sumCostPerMonth\"\n            ]\n          },\n          {\n            $divide: [\n              {\n                $divde: [\n                  {\n                    $multiply: [\"$valueOfTruck\", \"$deprecationPerYear\"]\n                  },\n                  12\n                ]\n              },\n              \"$averageDistancePerMonth\"\n            ]\n          }\n        ]\n      }\n    }\n  }\n]);\n"],"file":"searchSingle.js"}